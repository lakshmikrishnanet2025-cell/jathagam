<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<title>ஜாதகம்</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
/* ---------- TAMIL PRINT FONT FIX ---------- */
@font-face{
    font-family:"TamilPrint";
    src:local("Noto Sans Tamil"),local("Latha"),local("Arial Unicode MS");
}

/* ---------- BASE ---------- */
body{
    margin:0;
    background:#d6c6b5;
    font-family:"TamilPrint",Arial,sans-serif;
    color:#4a1f14;
}

/* ---------- ACTIONS ---------- */
.actions{
    width:794px;
    margin:8px auto;
    text-align:right;
}
.actions button{
    padding:6px 12px;
    background:#7a1e12;
    color:#fff;
    border:none;
    cursor:pointer;
}

/* ---------- PAGE (PRINT SAFE) ---------- */
.page{
    width:794px;
    min-height:1040px;              /* printable A4 height */
    margin:0 auto;
    background:#fffaf4;
    border:3px double #7a1e12;
    padding:12px 16px;
    box-sizing:border-box;
    overflow:hidden;
}

/* ---------- HEADER ---------- */
.top-header{
    text-align:center;
    font-size:18px;
    font-weight:bold;
    color:#7a1e12;
    border-bottom:2px solid #7a1e12;
    padding-bottom:4px;
    margin-bottom:6px;
}

/* ---------- LAYOUT ---------- */
.header{
    display:flex;
    gap:10px;
}
.left{flex:2}
.right{flex:1;text-align:right}

.photo-box{
    width:150px;
    height:190px;
    border:2px solid #7a1e12;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#fff;
    font-size:11px;
}

/* ---------- TABLE ---------- */
table{
    width:100%;
    border-collapse:collapse;
    font-size:13px;
}
td{
    padding:3px;
    vertical-align:top;
    line-height:1.35;      /* Tamil fix */
}
.label{
    width:190px;
    font-weight:bold;
}

/* ---------- EDITABLE ---------- */
.editable{
    border-bottom:1px dashed #7a1e12;
    padding:1px 3px;
}
.editable:focus{
    outline:none;
    background:#fff0e8;
}

/* ---------- SECTION TITLE ---------- */
.section-title{
    text-align:center;
    font-size:15px;
    font-weight:bold;
    margin:6px 0 4px;
    color:#7a1e12;
    background:#f1dfd2;
    border:1px solid #7a1e12;
}

/* ---------- JATHAGAM (13 BOX) ---------- */
.horoscope{
    display:flex;
    justify-content:space-between;
    margin-top:6px;
}

.jathagam{
    width:260px;
    height:260px;
    border:2px solid #7a1e12;
    position:relative;
}

.box{
    position:absolute;
    width:65px;
    height:65px;
    border:1px solid #7a1e12;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:11px;
    line-height:1.35;
}
.box:focus{outline:none;background:#fff0e8;}

.center-box{
    position:absolute;
    top:65px; left:65px;
    width:130px; height:130px;
    border:2px solid #7a1e12;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:bold;
    font-size:13px;
    line-height:1.35;
}

/* positions */
.b1{top:0;left:0} .b2{top:0;left:65px} .b3{top:0;left:130px} .b4{top:0;left:195px}
.b5{top:65px;left:195px} .b6{top:130px;left:195px}
.b7{top:195px;left:195px} .b8{top:195px;left:130px}
.b9{top:195px;left:65px} .b10{top:195px;left:0}
.b11{top:130px;left:0} .b12{top:65px;left:0}

/* ---------- FOOTER ---------- */
.footer{
    text-align:center;
    margin-top:6px;
    font-size:12px;
    font-weight:bold;
    border-top:1px solid #7a1e12;
    padding-top:4px;
}

/* ---------- PRINT FIX ---------- */
@media print{
    body{background:#fff;}
    .actions{display:none;}
    .page{
        transform:scale(0.95);          /* FORCE single page */
        transform-origin:top left;
        page-break-inside:avoid;
    }
    *{
        letter-spacing:0.2px;
        text-rendering:optimizeLegibility;
        -webkit-print-color-adjust:exact;
        print-color-adjust:exact;
        page-break-inside:avoid;
    }
}
</style>
</head>

<body>

<div class="actions">
<button onclick="exportPDF()">Export PDF</button>
<input type="file" accept="image/*,application/pdf" onchange="uploadPhoto(event)">
</div>

<div class="page" id="pdfContent">

<div class="top-header editable" contenteditable>
ஸ்ரீ அம்மன் துணை
</div>

<!-- BASIC DETAILS -->
<div class="header">
<div class="left">
<table>
<tr><td class="label">பெயர்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">பாலினம்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">பிறந்த தேதி</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">பிறந்த நேரம்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">பிறந்த ஊர்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">இருப்பிடம்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">படிப்பு</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">பணி விவரங்கள்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">மாத வருமானம்</td><td>: <span class="editable" contenteditable></span></td></tr>
</table>
</div>

<div class="right">
<div class="photo-box" id="photoBox">Photo / PDF</div>
</div>
</div>

<div class="section-title">தனிப்பட்ட & குடும்ப விவரம்</div>
<table>
<tr><td class="label">ஜாதி</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">குலம் / கோத்திரம் / வீடு</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">உயரம்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">எடை</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">நிறம்</td><td>: <span class="editable" contenteditable></span></td></tr>

<tr><td class="label">தந்தை பெயர்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">தந்தை பணி விபரம்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">உடன் பிறந்தவர்கள்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">தொலைப்பேசி எண்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">வாட்ஸ்ஆப் எண்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">முகவரி</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">சொத்து விபரம்</td><td>: <span class="editable" contenteditable></span></td></tr>

<tr><td class="label">தாய் பெயர்</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">தாய் பணி விபரம்</td><td>: <span class="editable" contenteditable></span></td></tr>
</table>

<div class="section-title">ஜாதக விவரம்</div>
<table>
<tr><td class="label">உதயாதி நாழிகை</td><td>: <span class="editable" contenteditable></span></td></tr>
<tr><td class="label">சூர்ய உதயம்</td><td>: <span class="editable" contenteditable></span></td></tr>
</table>

<div class="section-title">ஜாதக கட்டம்</div>

<div class="horoscope">

<!-- RASI -->
<div class="jathagam">
<div class="box b1" contenteditable></div><div class="box b2" contenteditable></div>
<div class="box b3" contenteditable></div><div class="box b4" contenteditable></div>
<div class="box b5" contenteditable></div><div class="box b6" contenteditable></div>
<div class="box b7" contenteditable></div><div class="box b8" contenteditable></div>
<div class="box b9" contenteditable></div><div class="box b10" contenteditable></div>
<div class="box b11" contenteditable></div><div class="box b12" contenteditable></div>
<div class="center-box editable" contenteditable>ராசி</div>
</div>

<!-- NAVAMSA -->
<div class="jathagam">
<div class="box b1" contenteditable></div><div class="box b2" contenteditable></div>
<div class="box b3" contenteditable></div><div class="box b4" contenteditable></div>
<div class="box b5" contenteditable></div><div class="box b6" contenteditable></div>
<div class="box b7" contenteditable></div><div class="box b8" contenteditable></div>
<div class="box b9" contenteditable></div><div class="box b10" contenteditable></div>
<div class="box b11" contenteditable></div><div class="box b12" contenteditable></div>
<div class="center-box editable" contenteditable>நவாம்சம்</div>
</div>

</div>

<div class="footer">
lakshmikrishna net centre
</div>

</div>

<script>
function uploadPhoto(e){
    const f=e.target.files[0];
    const box=document.getElementById("photoBox");
    box.innerHTML="";
    if(!f) return;
    if(f.type.startsWith("image/")){
        const img=document.createElement("img");
        img.src=URL.createObjectURL(f);
        img.style.maxWidth="100%";
        img.style.maxHeight="100%";
        box.appendChild(img);
    }else{
        box.innerHTML="PDF Uploaded";
    }
}

function exportPDF(){
    const el=document.getElementById("pdfContent");
    html2pdf().from(el).set({
        margin:0,
        filename:"jathagam.pdf",
        html2canvas:{
            scale:2,
            scrollY:0,
            windowWidth:794,
            windowHeight:1040
        },
        jsPDF:{
            unit:"px",
            format:[794,1040],
            orientation:"portrait"
        }
    }).save();
}
</script>

</body>
</html>
